# Video Streaming Platform - Other Diagrams

## 1. Deployment Diagram

```
┌────────────────────────────────────────────────────────────────────────────┐
│                              GLOBAL DEPLOYMENT                              │
└────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                           REGION: US-EAST-1                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌──────────────────────────────────────────────────────────────────┐     │
│   │  VPC (10.0.0.0/16)                                                │     │
│   │                                                                    │     │
│   │  ┌────────────────────────────────────────────────────────────┐  │     │
│   │  │  Public Subnet (10.0.1.0/24)  - AZ-1a                      │  │     │
│   │  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │  │     │
│   │  │  │ Load Balancer│  │  NAT Gateway │  │  Bastion Host│     │  │     │
│   │  │  └──────────────┘  └──────────────┘  └──────────────┘     │  │     │
│   │  └────────────────────────────────────────────────────────────┘  │     │
│   │                                                                    │     │
│   │  ┌────────────────────────────────────────────────────────────┐  │     │
│   │  │  Private Subnet (10.0.2.0/24) - AZ-1a                      │  │     │
│   │  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │  │     │
│   │  │  │ API Services │  │Video Services│  │Auth Services │     │  │     │
│   │  │  │ (ECS/K8s)    │  │  (ECS/K8s)   │  │  (ECS/K8s)   │     │  │     │
│   │  │  └──────────────┘  └──────────────┘  └──────────────┘     │  │     │
│   │  └────────────────────────────────────────────────────────────┘  │     │
│   │                                                                    │     │
│   │  ┌────────────────────────────────────────────────────────────┐  │     │
│   │  │  Data Subnet (10.0.3.0/24) - AZ-1a                         │  │     │
│   │  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │  │     │
│   │  │  │ PostgreSQL   │  │   MongoDB    │  │    Redis     │     │  │     │
│   │  │  │   (RDS)      │  │  (DocumentDB)│  │ (ElastiCache)│     │  │     │
│   │  │  └──────────────┘  └──────────────┘  └──────────────┘     │  │     │
│   │  └────────────────────────────────────────────────────────────┘  │     │
│   │                                                                    │     │
│   │  ┌────────────────────────────────────────────────────────────┐  │     │
│   │  │  Public Subnet (10.0.11.0/24) - AZ-1b (Redundancy)         │  │     │
│   │  └────────────────────────────────────────────────────────────┘  │     │
│   │  ┌────────────────────────────────────────────────────────────┐  │     │
│   │  │  Private Subnet (10.0.12.0/24) - AZ-1b (Redundancy)        │  │     │
│   │  └────────────────────────────────────────────────────────────┘  │     │
│   │  ┌────────────────────────────────────────────────────────────┐  │     │
│   │  │  Data Subnet (10.0.13.0/24) - AZ-1b (Redundancy)           │  │     │
│   │  └────────────────────────────────────────────────────────────┘  │     │
│   └──────────────────────────────────────────────────────────────────┘     │
│                                                                              │
│   ┌──────────────────────────────────────────────────────────────────┐     │
│   │  S3 Buckets                                                       │     │
│   │  - video-raw (Original uploads)                                  │     │
│   │  - video-transcoded (Processed videos)                           │     │
│   │  - thumbnails (Video thumbnails)                                 │     │
│   │  - logs (Application logs)                                       │     │
│   └──────────────────────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                           REGION: EU-WEST-1                                  │
│                          (Similar structure)                                 │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                           REGION: AP-SOUTHEAST-1                             │
│                          (Similar structure)                                 │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                           CDN EDGE LOCATIONS                                 │
│  - 200+ Edge Locations Worldwide (CloudFront/Akamai)                        │
│  - Caching video content                                                     │
│  - Serving static assets                                                     │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 2. Network Diagram

```
                          ┌──────────────────────┐
                          │    Internet/Users    │
                          └──────────┬───────────┘
                                     │
                          ┌──────────▼───────────┐
                          │   Route 53 (DNS)     │
                          │   - Geolocation      │
                          │   - Health checks    │
                          └──────────┬───────────┘
                                     │
                    ┌────────────────┼────────────────┐
                    │                │                │
         ┌──────────▼─────┐  ┌──────▼───────┐  ┌────▼─────────┐
         │  CloudFront    │  │  CloudFront  │  │ CloudFront   │
         │  (US Region)   │  │  (EU Region) │  │ (APAC Region)│
         └───────┬────────┘  └──────┬───────┘  └────┬─────────┘
                 │                  │               │
         ┌───────▼──────────────────▼───────────────▼─────────┐
         │             Application Load Balancer              │
         │  - SSL Termination                                 │
         │  - Path-based routing                              │
         │  - Health checks                                   │
         └───────┬────────────────────────────────────────────┘
                 │
    ┌────────────┼────────────┐
    │            │            │
┌───▼───┐   ┌───▼───┐   ┌───▼───┐
│ Web   │   │ API   │   │Stream │
│ Tier  │   │ Tier  │   │ Tier  │
└───┬───┘   └───┬───┘   └───┬───┘
    │           │           │
    └───────────┼───────────┘
                │
    ┌───────────┼───────────┐
    │           │           │
┌───▼───┐   ┌──▼────┐  ┌───▼────┐
│Service│   │Service│  │Database│
│ Mesh  │   │ Layer │  │  Layer │
└───────┘   └───────┘  └────────┘
```

## 3. Caching Strategy Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                      CACHING LAYERS                              │
└─────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│  L1: Browser Cache (Client-side)                                 │
│  - Static assets (JS, CSS, images): 7 days                       │
│  - Video manifests: 60 seconds                                   │
│  - API responses: No cache                                       │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│  L2: CDN Cache (CloudFront/Akamai)                               │
│  - Video segments (.ts/.m4s): 24 hours                           │
│  - Thumbnails: 7 days                                            │
│  - Popular videos: Cache at all edge locations                   │
│  - Less popular: Cache on-demand                                 │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│  L3: Application Cache (Redis)                                   │
│  - User sessions: 30 minutes                                     │
│  - Video metadata: 5 minutes                                     │
│  - Recommendations: 1 hour                                       │
│  - Search results: 10 minutes                                    │
│  - User preferences: 1 hour                                      │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│  L4: Database Query Cache                                        │
│  - PostgreSQL query cache                                        │
│  - MongoDB read concern: majority with read preference           │
│  - Cassandra local quorum reads                                  │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│  L5: Origin Storage (S3)                                         │
│  - Raw video files                                               │
│  - Transcoded outputs                                            │
│  - Permanent storage                                             │
└──────────────────────────────────────────────────────────────────┘

Cache Invalidation Strategy:
- Video upload: Invalidate CDN after transcoding
- Metadata update: Invalidate Redis and CDN
- User action: Invalidate specific user cache
- Scheduled: Clear stale cache every 24 hours
```

## 4. Security Architecture Diagram

```
┌──────────────────────────────────────────────────────────────────┐
│                      SECURITY LAYERS                             │
└──────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│  Layer 1: Edge Security                                          │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐    │
│  │ DDoS Protection│  │  WAF (Web App  │  │  Rate Limiting │    │
│  │  (CloudFlare)  │  │   Firewall)    │  │   (API Gateway)│    │
│  └────────────────┘  └────────────────┘  └────────────────┘    │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│  Layer 2: Network Security                                       │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐    │
│  │  VPC Isolation │  │  Security      │  │  Private       │    │
│  │  & Segmentation│  │  Groups        │  │  Subnets       │    │
│  └────────────────┘  └────────────────┘  └────────────────┘    │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│  Layer 3: Application Security                                   │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐    │
│  │ Authentication │  │  Authorization │  │  Input         │    │
│  │ (JWT/OAuth2)   │  │  (RBAC)        │  │  Validation    │    │
│  └────────────────┘  └────────────────┘  └────────────────┘    │
│                                                                  │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐    │
│  │ HTTPS/TLS 1.3  │  │  API Keys      │  │  CORS Policies │    │
│  └────────────────┘  └────────────────┘  └────────────────┘    │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│  Layer 4: Data Security                                          │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐    │
│  │  Encryption at │  │  Encryption in │  │  DRM for Video │    │
│  │  Rest (AES-256)│  │  Transit (TLS) │  │  Content       │    │
│  └────────────────┘  └────────────────┘  └────────────────┘    │
│                                                                  │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐    │
│  │  Database      │  │  Secrets       │  │  Data          │    │
│  │  Encryption    │  │  Management    │  │  Masking       │    │
│  │  (TDE)         │  │  (Vault/KMS)   │  │                │    │
│  └────────────────┘  └────────────────┘  └────────────────┘    │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌──────────────────────────────────────────────────────────────────┐
│  Layer 5: Monitoring & Compliance                                │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐    │
│  │  Security      │  │  Audit Logs    │  │  Compliance    │    │
│  │  Monitoring    │  │  (CloudTrail)  │  │  (GDPR, CCPA)  │    │
│  └────────────────┘  └────────────────┘  └────────────────┘    │
└──────────────────────────────────────────────────────────────────┘
```

## 5. Disaster Recovery Diagram

```
┌──────────────────────────────────────────────────────────────────┐
│                   DISASTER RECOVERY ARCHITECTURE                 │
└──────────────────────────────────────────────────────────────────┘

PRIMARY REGION (US-EAST-1)          BACKUP REGION (US-WEST-2)
┌─────────────────────┐              ┌─────────────────────┐
│  Active Services    │              │  Standby Services   │
│  ─────────────────  │              │  ────────────────   │
│  - API Gateway      │────Replicate─►│  - API Gateway     │
│  - Microservices    │   (Active)   │  - Microservices   │
│  - Load Balancers   │              │  - Load Balancers  │
└─────────────────────┘              └─────────────────────┘
         │                                     │
         │                                     │
┌────────▼──────────┐              ┌──────────▼─────────┐
│  Primary Database │              │  Standby Database  │
│  ────────────────  │              │  ───────────────   │
│  - PostgreSQL     │──Async Rep──►│  - PostgreSQL      │
│  - Read Replicas  │              │  - Read Replicas   │
└───────────────────┘              └────────────────────┘
         │                                     │
         │                                     │
┌────────▼──────────┐              ┌──────────▼─────────┐
│  S3 Primary       │              │  S3 Backup         │
│  ────────────     │              │  ──────────        │
│  - Video files    │───Cross──────►│  - Video files    │
│  - Thumbnails     │   Region     │  - Thumbnails      │
│                   │   Replication│                    │
└───────────────────┘              └────────────────────┘

Recovery Metrics:
- RTO (Recovery Time Objective): 15 minutes
- RPO (Recovery Point Objective): 5 minutes
- Automated failover via Route 53 health checks
- Regular DR drills: Monthly
```

## 6. Monitoring & Observability Diagram

```
┌──────────────────────────────────────────────────────────────────┐
│                     OBSERVABILITY STACK                          │
└──────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│  Metrics Collection (Prometheus/CloudWatch)                      │
│  - CPU, Memory, Disk usage                                       │
│  - Request rates, latencies                                      │
│  - Error rates, success rates                                    │
│  - Custom business metrics                                       │
└─────────────────────┬────────────────────────────────────────────┘
                      │
                      ▼
┌──────────────────────────────────────────────────────────────────┐
│  Logging (ELK Stack / CloudWatch Logs)                           │
│  - Application logs                                              │
│  - Access logs                                                   │
│  - Error logs                                                    │
│  - Audit logs                                                    │
└─────────────────────┬────────────────────────────────────────────┘
                      │
                      ▼
┌──────────────────────────────────────────────────────────────────┐
│  Distributed Tracing (Jaeger / X-Ray)                            │
│  - Request flow across services                                  │
│  - Performance bottlenecks                                       │
│  - Dependency mapping                                            │
└─────────────────────┬────────────────────────────────────────────┘
                      │
                      ▼
┌──────────────────────────────────────────────────────────────────┐
│  Alerting (PagerDuty / SNS)                                      │
│  - Threshold-based alerts                                        │
│  - Anomaly detection                                             │
│  - On-call escalation                                            │
└─────────────────────┬────────────────────────────────────────────┘
                      │
                      ▼
┌──────────────────────────────────────────────────────────────────┐
│  Dashboards (Grafana / CloudWatch)                               │
│  - Real-time metrics                                             │
│  - Business KPIs                                                 │
│  - Infrastructure health                                         │
└──────────────────────────────────────────────────────────────────┘

Key Metrics Monitored:
- Video playback success rate
- Average buffering time
- Transcoding job completion time
- API response times (P50, P95, P99)
- Error rates by service
- Active users count
- Video uploads per hour
```

## 7. CI/CD Pipeline Diagram

```
┌──────────────────────────────────────────────────────────────────┐
│                      CI/CD PIPELINE                              │
└──────────────────────────────────────────────────────────────────┘

Developer ──► Git Push ──► GitHub
                              │
                              ▼
                    ┌─────────────────┐
                    │  CI Pipeline     │
                    │  (GitHub Actions)│
                    └────────┬─────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
    ┌────▼────┐      ┌──────▼──────┐     ┌─────▼─────┐
    │  Lint   │      │   Build     │     │   Test    │
    │  Code   │      │   Docker    │     │   Unit    │
    │         │      │   Images    │     │   Int.    │
    └────┬────┘      └──────┬──────┘     └─────┬─────┘
         │                  │                   │
         └──────────────────┼───────────────────┘
                            │
                    ┌───────▼────────┐
                    │  Security Scan  │
                    │  - SAST         │
                    │  - Dependency   │
                    │  - Container    │
                    └───────┬─────────┘
                            │
                    ┌───────▼────────┐
                    │  Push to ECR    │
                    │  (Container     │
                    │   Registry)     │
                    └───────┬─────────┘
                            │
         ┌──────────────────┼──────────────────┐
         │                  │                  │
    ┌────▼────┐      ┌─────▼──────┐    ┌─────▼──────┐
    │  Deploy │      │   Deploy   │    │   Deploy   │
    │  to Dev │      │   to Stage │    │   to Prod  │
    │         │      │            │    │  (Canary)  │
    └─────────┘      └────┬───────┘    └─────┬──────┘
                          │                   │
                    ┌─────▼──────┐      ┌────▼───────┐
                    │  Smoke     │      │  Monitor   │
                    │  Tests     │      │  & Rollback│
                    └────────────┘      └────────────┘
```

## 8. Content Delivery Flow Diagram

```
Content Creator              Platform              End User
      │                         │                      │
      │──1. Upload Video────────►│                      │
      │                         │                      │
      │                    ┌────▼─────┐               │
      │                    │ Validate │               │
      │                    │ & Store  │               │
      │                    └────┬─────┘               │
      │                         │                      │
      │                    ┌────▼─────┐               │
      │                    │Transcode │               │
      │                    │ Queue    │               │
      │                    └────┬─────┘               │
      │                         │                      │
      │                    ┌────▼─────┐               │
      │                    │ Generate │               │
      │                    │Multiple  │               │
      │                    │Bitrates  │               │
      │                    └────┬─────┘               │
      │                         │                      │
      │                    ┌────▼─────┐               │
      │                    │  DRM     │               │
      │                    │Encryption│               │
      │                    └────┬─────┘               │
      │                         │                      │
      │                    ┌────▼─────┐               │
      │                    │Distribute│               │
      │                    │  to CDN  │               │
      │                    └────┬─────┘               │
      │                         │                      │
      │◄───2. Notification──────┤                      │
      │   (Video Ready)          │                      │
      │                         │                      │
      │                         │◄──3. Request Video───┤
      │                         │                      │
      │                    ┌────▼─────┐               │
      │                    │Authorize │               │
      │                    │   User   │               │
      │                    └────┬─────┘               │
      │                         │                      │
      │                    ┌────▼─────┐               │
      │                    │  Serve   │               │
      │                    │Manifest  │               │
      │                    └────┬─────┘               │
      │                         │                      │
      │                         ├──4. Manifest─────────►│
      │                         │                      │
      │                         │                 ┌────▼─────┐
      │                         │                 │ Request  │
      │                         │                 │ Segments │
      │                         │                 └────┬─────┘
      │                         │                      │
      │                    CDN  │◄──5. Get Segments────┤
      │                         │                      │
      │                         ├──6. Video Chunks─────►│
      │                         │                      │
      │                         │◄──7. Analytics───────┤
      │                         │    (Watch time,      │
      │                         │     Engagement)      │
```
